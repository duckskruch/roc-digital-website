# Настройка OpenRouter для AI-чата

## 1. Создание файла .env.local

Создайте файл `.env.local` в корне проекта (рядом с package.json) и добавьте:

```env
# OpenRouter API Key - замените на ваш ключ
OPENROUTER_API_KEY=your_openrouter_api_key_here

# Site URL for OpenRouter referrer
NEXT_PUBLIC_SITE_URL=http://localhost:3000
```

## 2. Получение API ключа

1. Зарегистрируйтесь на [OpenRouter.ai](https://openrouter.ai/)
2. Перейдите в раздел "Keys" в вашем профиле
3. Создайте новый API ключ
4. Скопируйте ключ и вставьте в переменную `OPENROUTER_API_KEY`

## 3. Модель

Чат использует модель `google/gemini-2.0-flash-001` от Google.

## 4. Контекст и промпт

AI-ассистент настроен с полным контекстом о компании ROC Digital:

### Файл: `src/lib/chat-prompt.ts`
- Системный промпт с описанием компании
- Информация об услугах, ценах, сроках
- Инструкции по работе с клиентами
- Конфигурация OpenRouter

### Файл: `src/app/api/chat/route.ts`
- API endpoint для обработки сообщений
- Сохранение контекста диалога (последние 10 сообщений)
- Обработка ошибок с fallback ответами

## 5. Функции чата

- ✅ Отвечает на вопросы о услугах, ценах, сроках
- ✅ Помогает заполнить бриф за 60 секунд
- ✅ Записывает на консультацию
- ✅ Сохраняет контекст диалога
- ✅ Обрабатывает ошибки
- ✅ Использует полную информацию о компании

## 6. Запуск

После настройки переменных окружения:

```bash
npm run dev
```

Чат будет работать на `/api/chat` endpoint.

## 7. Тестирование

Откройте сайт и попробуйте написать в чат:
- "Расскажи о ваших услугах"
- "Сколько стоит AI-ассистент?"
- "Как быстро можно внедрить автоматизацию?"

## 8. Структура файлов

```
src/
├── app/
│   └── api/
│       └── chat/
│           └── route.ts          # API endpoint
├── lib/
│   └── chat-prompt.ts           # Промпт и конфигурация
└── components/
    └── FAQWithChat.tsx          # Компонент чата
```
